/*!tacc-website v0.0.1 | Sunday, March 8th, 2015, 8:19:52 PM | 2015 Andrzej Dubiel*/define(["jquery","jquery.cycle2","skrollr","vimeo","async!http://maps.google.com/maps/api/js?sensor=false"],function(a,b,c){function d(a){var b=document.querySelector(".timeline-wrap"),c=window.getComputedStyle(b,null),d=c.getPropertyValue("-webkit-transform")||c.getPropertyValue("-moz-transform")||c.getPropertyValue("-ms-transform")||c.getPropertyValue("-o-transform")||c.getPropertyValue("transform")||"FAIL",g=e(d),h=parseInt(g[4]),i="future"===a?h-=100:h+=100;h>-150&&f.$timeline.width()-f.$win.width()>h-300&&f.$timeline.attr("style","-webkit-transform: translateX("+i+"px);-ms-transform: translateX("+i+"px);-moz-transform: translateX("+i+"px); transform: translateX("+i+"px)")}function e(a){return a.match(/(-?[0-9\.]+)/g)}var f,g=g||{};g.init=function(){f=this,f.loaded(),f.cache(),f.bind(),f.animatePhones(),f.slideshows(),f.showMap()},g.loaded=function(){a("body").removeClass("loading").addClass("loaded")},g.cache=function(){f.$doc=a(document),f.$win=a(window),f.$nav=a("nav"),f.$navTrigger=a(".nav-mobile-trigger"),f.$timeline=a(".timeline-wrap"),f.$contactForm=a(".form-contact"),f.$contactSection=a(".contact-items"),f.$teamSection=a(".cycle-team"),f.$video=a(".video-overlay"),f.$body=a("html, body"),f.$timelineInt},g.bind=function(){f.$doc.on("click",".nav-mobile-trigger",function(a){a.preventDefault(),f.$navTrigger.toggleClass("active"),f.$nav.toggleClass("show")}),f.$doc.on("touchstart mousedown","[data-timeline]",function(){f.animateTimeline(a(this).data("timeline"))}),f.$doc.on("touchend mouseup","[data-timeline]",function(){f.animateTimeline(!1)}),f.$doc.on("touchstart touchend",".timeline-item",function(b){b.preventDefault(),a(this).toggleClass("hover")}),f.$doc.on("click","nav a",function(b){b.preventDefault(),f.$navTrigger.toggleClass("active"),f.$nav.toggleClass("show");var c=a(this).attr("href");f.$body.stop().animate({scrollTop:a(c).offset().top},500)}),f.$doc.on("click",".js-learn-more",function(b){b.preventDefault(),f.$navTrigger.removeClass("active"),f.$nav.removeClass("show");var c=a(this).attr("href");f.$body.stop().animate({scrollTop:a(c).offset().top},500)}),f.$doc.on("click",".cycle-pager span",function(){f.$body.stop().animate({scrollTop:a("#team").offset().top},500)}),f.$doc.on("click",".watch-video, .js-watch-video",function(a){a.preventDefault(),f.$video.removeClass("hide-it"),f.videoHandler("play")}),f.$doc.on("click touchstart",".close-video, .video-overlay",function(a){a.preventDefault(),f.$video.addClass("hide-it"),f.videoHandler("pause")}),f.$doc.on("keydown",function(a){27==a.keyCode&&(f.$video.addClass("hide-it"),f.videoHandler("unload"))}),f.$doc.on("submit",".form-contact",function(b){b.preventDefault();var c=a("#email").val(),d=a("#name").val(),e=a(".checkbox-list input:checked").map(function(){return this.value}).get().join("|");if(c.length>0&&d.length>0){var f={name:d,email:c,checkbox:e};a.ajax({type:"POST",url:"",data:f,success:function(){a(".contact-items").cycle("goto",3)}})}else a(".contact-items").cycle("goto",1)})},g.videoHandler=function(a){var b=document.getElementById("video"),c=Froogaloop(b);c.api(a)},g.animateTimeline=function(a){a?f.$timelineInt=setInterval(function(){d(a)},50):clearInterval(f.$timelineInt)},g.slideshows=function(){f.$contactSection.cycle({timeout:0,autoHeight:"container",slides:".contact-item",next:".cycle-next-form",prev:".cycle-prev-form",log:!1}),f.$teamSection.cycle({timeout:0,autoHeight:"container",slides:".slide",pager:".cycle-pager",log:!1,swipe:!0})},g.animatePhones=function(){if(!/Android|iPhone|iPad|iPod|BlackBerry|Windows Phone/i.test(navigator.userAgent||navigator.vendor||window.opera)){c.init({forceHeight:!1})}},g.showMap=function(){{var a={zoom:11,scrollwheel:!1,navigationControl:!1,mapTypeControl:!1,scaleControl:!1,draggable:!1,center:new google.maps.LatLng(40.4612861,-79.9233424),styles:[{featureType:"all",elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#000000"},{lightness:40}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#000000"},{lightness:16}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:17},{weight:1.2}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#000000"},{lightness:21}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#000000"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#000000"},{lightness:16}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#000000"},{lightness:19}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#000000"},{lightness:17}]}]},b=document.getElementById("map"),c=new google.maps.Map(b,a),d="images/map-pin.svg";new google.maps.Marker({position:new google.maps.LatLng(40.4612861,-79.9233424),map:c,title:"tACC",icon:d})}},window.Tacc=g,window.Tacc.init()});